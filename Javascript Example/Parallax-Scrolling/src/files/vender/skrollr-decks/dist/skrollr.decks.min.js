/*!
 * skrollr-decks 1.0.5
 * Fullpage presentation decks with scrolling
 * https://github.com/TrySound/skrollr-decks
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e){"use strict";window.skrollr?window.skrollr.decks=e(window,document,window.skrollr):console.error("`skrollr` not found")}(function(e,t,n){"use strict";function r(e,t){(e=e.toLowerCase())in h&&"function"==typeof t&&h[e].unshift(t)}function o(e,t){var n,r=h[e];for(n=r.length-1;n>-1;n--)r[n].apply({},t)}function i(e){if(v)return!1;v=!0;var r,i,a,f;f=c={},e="object"==typeof e?e:{};for(r in g)g.hasOwnProperty(r)&&(c[r]=e[r]||g[r]);i=n.init({forceHeight:!1}),k=s(f.decks,m),y=u(m),l(),t.body.appendChild(y),i.refresh(y.children),i.on("render",function(e){var t=this,n=d.call(t,e);b(a),void 0!==n&&f.autoscroll&&(a=p(function(){t.animateTo(n,f)},f.delay)),o("render",[e])})}function a(e,t){var r,o,i,a=k[e],l=n.get();return l&&(l.stopAnimateTo(),a||(o=y.getElementsByClassName("skrollable-between"),1===o.length&&(i=Number(o[0].getAttribute("data-skrollr-decks-index")),a=m["up"===e?i-1:"down"===e?i+1:-1]),2===o.length&&(o=o["up"===e?0:"down"===e?1:-1],a=o?k[o.getAttribute("data-anchor-target")]:null)),a)?(r=l.relativeToAbsolute(a,"top","top")+1,t?l.setScrollTop(r,!0):l.animateTo(r,c),!0):!1}function l(){if(v){var t,n,r,o=e.innerHeight+2;for(r=m.length-1;r>-1;r--)t=m[r],t.style.height="auto",n=t.offsetHeight,t.style.height=(o>n?o:n)+"px";t.offsetHeight}}function d(t){if(v){var r,i,a,l,d,s,u=n.get(),g=y.getElementsByClassName("skrollable-between"),h=t.curTop,p=e.innerHeight,b=p*c.offset/100;return 1===g.length&&(r=k[g[0].getAttribute("data-anchor-target")],f!==r&&o("change",[r]),f=r),2===g.length?(i=k[g[0].getAttribute("data-anchor-target")],a=k[g[1].getAttribute("data-anchor-target")],d=u.relativeToAbsolute(i,"top","bottom"),l=u.relativeToAbsolute(a,"top","top"),"up"===t.direction&&d-b>h||l+b>h+p?(r=i,s=d-p-1):(r=a,s=l+1),f!==r&&o("change",[r]),f=r,s):void 0}}function s(e,n){{var r,o,i={};+new Date}if("string"==typeof e)for(e=t.querySelectorAll(e),o=e.length-1;o>-1;o--)r=e[o],n.unshift(r),r.id=r.id?r.id:"skroll-deck-id-"+o,i["#"+r.id]=r;return i}function u(e){var n,r,o,i=t.createElement("ul"),a=t.createElement("li");for(i.style.display="none",a.setAttribute("data-top-bottom",""),a.setAttribute("data-bottom-top",""),n=0,r=e.length;r>n;n++)o=a.cloneNode(),o.setAttribute("data-skrollr-decks-index",n),o.setAttribute("data-anchor-target","#"+e[n].id),i.appendChild(o);return i}var c,f,g={decks:".skrollr-deck",offset:15,duration:600,easing:"quadratic",delay:500,autoscroll:!0},h={render:[],change:[]},p=e.setTimeout,b=e.clearTimeout,v=!1,k={},m=[],y=t.createElement("ul");return t.addEventListener("keydown",function(e){var t=n.get(),r=[38,40,33,34,36,35];r.indexOf(e.keyCode)>-1&&t&&t.isAnimatingTo()&&t.stopAnimateTo()},!1),t.addEventListener("DOMContentLoaded",function(){var e=t.querySelector(".skrollr-decks-init");e&&"BODY"===e.tagName&&i()},!1),e.addEventListener("load",l,!1),e.addEventListener("load",d,!1),e.addEventListener("resize",l,!1),e.addEventListener("resize",d,!1),{init:i,animateTo:a,refresh:l,on:r}});